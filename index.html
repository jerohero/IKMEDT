<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>IKMEDT</title>
        <script src="https://aframe.io/releases/1.1.0/aframe.min.js"></script>
        <script src="https://unpkg.com/aframe-template-component@^3.1.1/dist/aframe-template-component.min.js"></script>
        <script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.1/dist/aframe-extras.min.js"></script>
        <script src="https://unpkg.com/aframe-aabb-collider-component@3.1.0/dist/aframe-aabb-collider-component.min.js"></script>
        <script src="https://recast-api.donmccurdy.com/aframe-inspector-plugin-recast.js"></script>
        <script src="https://unpkg.com/aframe-event-set-component@3.0.3/dist/aframe-event-set-component.min.js"></script>
        <script src="main.js"></script>
        <script src="festival.js"></script>
        <script src="room.js"></script>
        <script src="onhover.js"></script>
    </head>
    <body>
        <a-scene
            fog="color: #DBF7FF; density: .2;"
            inspector-plugin-recast
            stats
        >

            <a-assets>
                <a-asset-item
                    id="nav-mesh"
                    src="assets/navmesh.gltf"
                ></a-asset-item>
                <a-asset-item
                    id="festival"
                    src="assets/festival.gltf"
                ></a-asset-item>
                <a-asset-item
                    id="nav-mesh-room"
                    src="assets/navmeshroom.glb"
                ></a-asset-item>
                <a-asset-item
                    id="room"
                    src="assets/room-with-roof.glb"
                ></a-asset-item>
                <a-asset-item
                    id="green-arrow"
                    src="assets/green-arrow.glb"
                ></a-asset-item>
                <a-asset-item
                    id="red-arrow"
                    src="assets/red-arrow.glb"
                ></a-asset-item>
                <img id="sky" src="assets/sky_day.jpg" />
                <img id="face1" src="assets/m_face1.png" />
                <img id="corona" src="assets/corona.png" />
            </a-assets>


            <!-- Scenes -->
            <a-entity room id="room-scene">
                <a-sky src="#sky"></a-sky>

                <a-entity
                    gltf-model="#nav-mesh-room"
                    position="-2.874 0 2.078"
                    nav-mesh
                ></a-entity>

                <a-entity gltf-model="#room"></a-entity>
                <a-entity
                    id="greenArrow"
                    gltf-model="#green-arrow"
                    position="-5.765 0.829 2.571"
                    scale="0.3 0.3 0.3"
                    rotation="0 -130 90"
                    onhovergreen
                ></a-entity>
                <a-entity
                    id="redArrow"
                    gltf-model="#red-arrow"
                    position="-5.765 0.829 2.978"
                    scale="0.3 0.3 0.3"
                    rotation="0 130 90"
                    onhoverred
                ></a-entity>
                <a-entity
                    id="textPlane"
                    text="value: Hi;  color: black; align: center;"
                    scale="0.39 0.39 0.39"
                    geometry="primitive: plane; width: 0.980; height: 0.550"
                    position="-5.765 0.838 2.775"
                    material="opacity: 0.0; transparent: true"
                    rotation="0 89.000 0"
                ></a-entity>
            </a-entity>

            <a-entity festival id="festival-scene" position="0 1 0">
                <a-sky src="#sky"></a-sky>
                <a-entity gltf-model="#festival" scale="20 20 20" position="-15 -1.2 -110" rotation="0 -60 0"></a-entity>
                <a-entity light="intensity: 3;" position="40 110 22"></a-entity>
                <a-entity light="intensity: 2; type: point" position="-55 120 -235"></a-entity>

                <!-- <a-entity gltf-model="#nav-mesh" nav-mesh></a-entity>
                <a-grid color="green" width="30" height="30" rotation="-90 0 0"></a-grid>
                <a-plane class="floor" color="green" width="30" height="30" position="0 0 -30" rotation="-90 0 0"></a-plane>

                <a-plane class="wall" color="grey" width="10" height="10" position="0 5 -20" rotation="0 0 0"></a-plane> -->

                <a-plane id="checkpoint-area2" aabb-collider="objects: #player-ring" 
                    color="grey" width="100" height="10" position="0 0 -55" rotation="0 0 0"
                    visible="false"
                ></a-plane>

                <a-entity id="enemies" position="-45 0 -60">
                    <a-entity id="enemies-area1" position="0 0 0"></a-entity>
                    <!-- <a-entity id="enemies-area2" visible="false" position="0 0 -50"></a-entity>
                    <a-entity id="enemies-area3" visible="false" position="0 0 -100"></a-entity> -->
                </a-entity>

                <a-cylinder class="collisionTest" color="pink" radius=".08" height="1.5" position="0 -.2 -5">
                    <a-sphere src="#face1" position="0 .9 0" radius=".3" rotation="0 -90 0"></a-sphere>
                    <a-ring radius-inner="0.9" radius-outer="1.05" rotation="-90 0 0" position="0 -.6 0" color="yellow">
                        <a-ring radius-inner="0.5" radius-outer="0.65" aabb-collider="objects: #player-ring" color="red"></a-ring>
                    </a-ring>
                </a-cylinder>
            </a-entity>


            <!-- Player -->
            <a-entity id="rig" movement-controls="speed: .3; constrainToNavMesh: true" onclicks>
                <a-entity light="type: point"></a-entity>

                <a-ring id="player-ring" radius-inner="0.6" radius-outer="0.75" position="0 .2 0" rotation="-90 0 0" color="crimson"></a-ring>

                <a-plane id="fail-screen" visible="false" color="white" width="5" height="3" position="0 1.25 -2" rotation="-10 0 0">
                    <a-entity
                        text="value: U heeft zich niet voldoende aan\nde COVID-19 regels gehouden!; align: center; color: black; width: 4;"
                        position="0 .5 .05"
                    >
                        <a-entity
                            text="value: Probeer 1.5 meter afstand te houden van anderen\nom uw kans op besmetting te verlagen.; align: center; color: black; width: 2;"
                            position="0 -.4 0"
                        >
                        </a-entity>
                        <a-image
                            src="#corona"
                            height=".5"
                            width=".5"
                            position="0 .5 -.04"
                        >
                        </a-image>
                    </a-entity>

                    <a-plane id="restart-button" onhoverbutton color="red" width="2" height=".4" position="0 -.5 .05">
                        <a-entity
                            text="value: Opnieuw proberen; align: center; color: white; width: 4;"
                            position="0 0 0"
                        ></a-entity>
                    </a-plane>
                </a-plane>

                <a-entity
                    id="camera"
                    position="0 1.7 0"
                    camera
                    look-controls="pointerLockEnabled: false"
                >
                    <a-entity
                        id="player-exposure"
                        text="value: 0/3; align: center; color: green; width: .6;"
                        position="0 .2 -1"
                    >
                        <a-image
                            src="#corona"
                            height=".03"
                            width=".03"
                            position="-.05 0 0"
                        >
                        </a-image>
                    </a-entity>

                    <a-cursor
                        id="cursor"
                        fuse="true"
                        fuse-timeout="1500"
                        opacity="0.5"
                        animation__click="property: scale; startEvents: click; easing: easeInCubic; dur: 140; from: 0.1 0.1 0.1; to: 1 1 1"
                        animation__fusing="property: scale; startEvents: fusing; easing: easeInCubic; dur: 1350; from: 1 1 1; to: 0.1 0.1 0.1"
                        animation__mouseleave="property: scale; startEvents: mouseleave; easing: easeInCubic; dur: 450; to: 1 1 1"
                        geometry="primitive: sphere; radius: 0.005"
                        raycaster="objects: [onhovergreen], [onhoverred], [clickable]"
                    >
                    </a-cursor>

                </a-entity>
            </a-cylinder>

        </a-scene>
    </body>
</html>
